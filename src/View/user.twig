{% extends 'layout.twig' %}

{% block content %}

    <div class="container">
        <div class="row">
            <h3>Control panel</h3>
        </div>
        <div class="row">
            <p>Informations du compte</p>
        </div>
        <div class="row"><p>Session ID : {{ session.session_id }}</p></div>
        <div class="row"><p>Pseudo : {{ session.pseudo }}</p></div>
        <div class="row"><p>Adresse mail : {{ session.email }}</p></div>
        <div class="row"><p>Date de création du compte : {{ session.date_register }}</p></div>
        <div class="row"><p>Rang : {{ session.rank }}</p></div>


        <div class="row">
            <a href="index.php?page=user&method=listarticle">Liste de mes articles</a>
        </div>
        <div class="row">
            <a href="index.php?page=user&method=listcomment">Liste de mes commentaires</a>
        </div>


    </div>

    {% if article is defined %}
        <hr>
        <div class="container">
            {% if article is empty %}
                <div class="row">
                    <p>Vous n'avez pas encore rédiger d'article</p>
                </div>
                {% else %}

            {% for articles in article %}
                <div class="row">
                    <p>ID Article : {{ articles.id_article }}</p>
                </div>
                <div class="row">
                    <p>Titre: {{ articles.title }}</p>
                </div>
                <div class="row">
                    <p>Chapo : {{ articles.chapo }}</p>
                </div>
                <div class="row">
                    <p>Contenu : {{ articles.content }}</p>
                </div>
                <div class="row">
                    <p>Date de création: {{ articles.date }}</p>
                </div>
                {% if articles.date_update != null %}
                    <div class="row">
                        <p>Dernière modification le : {{ articles.date_update }}</p>
                    </div>
                {% endif %}
                <div class="row">
                    <p>Crée par : {{ articles.pseudo }}</p>
                </div>
                {% if articles.validated == 0 %}
                <div class="row">
                    <p>Article en attente d'approbation</p>
                </div>
                {% endif %}

                <a class="btn btn-primary" href="index.php?page=user&method=editarticle&idarticle={{ articles.id_article }}">Editer</a>
                <a class="btn btn-danger" href="index.php?page=user&method=deletearticle&idarticle={{ articles.id_article }}">Supprimer</a>
                <hr>
            {% endfor %}
                    {% endif %}

        </div>
    {% endif %}

    {% if comment is defined %}
        <hr>
        <div class="container">
    {% if comment is empty %}
        <div class="row">
            <p>Vous n'avez pas encore rédiger de commentaire</p>
        </div>
    {% else %}
            {% for comments in comment %}
                <div class="row">
                    <p>ID : {{ comments.id_comment }}</p>
                </div>
                <div class="row">

                    <p>Commentaire : {{ comments.content }}</p>
                </div>
                <div class="row">
                    <p>Ecrit par : {{ comments.pseudo }} le {{ comments.date }}</p>
                </div>
                <div class="row">
                    <p>Article : {{ comments.title }}</p>
                </div>
                {% if comments.validate == 0 %}
                <div class="row">
                    <p>Commentaire en attente d'approbation</p>
                </div>
                {% endif %}
                <a class="btn btn-danger" href="index.php?page=user&method=deletecomment&idcomment={{ comments.id_comment }}">Supprimer</a>
                <hr>
            {% endfor %}
        </div>
        {% endif %}
    {% endif %}

{% endblock %}